# useEffect を捨てる判断

- 課題 ID：FE-20260103-001
- 課題難易度：中級（やや易）

## 課題内容

非同期処理は、いつ useEffect じゃなくていいのか？

### 要件

イベント直書き実装

- onClick 内で async/await
- useEffect は使わない
- ボタンを押すと fetch を実行
- ローディング状態を表示
- エラー時はエラーメッセージを表示
- React + TypeScript（Vite 前提）

### 制限（重要）

- useCallback / useMemo 禁止
- AbortController 不要
- Custom Hook 化しない

### 提出物

- コンポーネントコード
- コードとは別に以下を提出
  1. この要件で どちらが正解だと思うか
  2. useEffect パターンのデメリット（最低2つ）
  3. 「useEffect を使うべき条件」を3行以内で定義

### 評価観点

- useEffect を「万能」だと思っていないか
- 責務がシンプルに保たれているか
- イベント起点 vs 状態起点 の違いを理解しているか

---

## 提出物の問いへの解答

> この要件で どちらが正解だと思うか

比較したときにシンプルなのは、イベントハンドラ直書きで、
今回のケースではFetchOnClickComparison.tsxのイベントハンドラ直書きが適している。

※ 実装ポイントとしては、buttonをloading中は非活性化していること。これがないとイベントハンドラ直書きの優位性が失われる。

> その理由（useEffect側のデメリットを最低2つ）

1. useEffect + state トリガー という2段階の仕組みが必要で煩雑化している。
2. useEffectの場合は依存配列のトリガーを考慮する必要があるが、イベントハンドラ直書きならボタンを押したときだけ実行されるシンプルで単純明快な実装。

> 「useEffect を使うべき条件」を3行以内で定義

- マウント時に自動的にデータを取得したいとき。
- ボタンクリック以外の状態変化でデータを再取得したいとき。
- 複数のデータをfetchしたいとき。
