# render に乗る値 / 乗らない値を見分ける（useState 基礎）

- 課題 ID：FE-20251225-001
- 難易度：内容・難易度は変更なし。

## 課題内容

次の3つの値を使って、ボタンを押したときの挙動の違いを確認する。

1. 通常の変数
2. useState
3. useRef（比較用）

```jsx
import { useRef, useState } from 'react'

export const RenderCheck = () => {
  let normalCount = 0
  const [stateCount, setStateCount] = useState(0)
  const refCount = useRef(0)

  const handleClick = () => {
    normalCount++
    setStateCount(prev => prev + 1)
    refCount.current++
    console.log('normal:', normalCount)
    console.log('state:', stateCount)
    console.log('ref:', refCount.current)
  }

  return (
    <div>
      <p>normal: {normalCount}</p>
      <p>state: {stateCount}</p>
      <p>ref: {refCount.current}</p>

      <button onClick={handleClick}>+1</button>
    </div>
  )
}
```

1. ボタンを3回くらい押す
2. 画面表示とconsole.logをそれぞれ確認
3. 次の3点を言語化できたらクリア

### チェックポイント

- なぜ normalCount は増えないのか？
- なぜ refCount は console では増えているのに画面は更新される／されない？
- なぜ stateCount だけが「UIに反映される」のか？

### ゴール（重要）

「useState を使うと、値が render のサイクルに乗る」
これを挙動ベースで説明できる状態になればOK。

---

## 提出物の問いへの解答

> なぜ normalCount は増えないのか？

ローカル変数であるため、再レンダー（関数コンポーネントを最初から実行し直す）のたびに0に戻る。handleClick()で、normalCount++をしても、その次のレンダーではリセットされてしまう。

> なぜ refCount は console では増えているのに画面は更新される／されない？

refCount.current++で値自体は増えているけど、useRefを使っているため、
値が変わっても再レンダーされないのが前提とした上で、今回の実装では画面も更新される。

何故なら、handleClickでsetStateCountでstateが変わるから、再レンダーが発生している。
そのため、画面も更新される。

> なぜ stateCount だけが「UIに反映される」のか？

useStateで作った値が変わると自動で再レンダーが発生し、その新しい値が画面に表示される仕組みだから。
