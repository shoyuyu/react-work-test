# useState：更新関数の「即時評価 vs 関数評価」を見分ける

- 課題 ID：FE-20251227-002
- 難易度：初級（5〜10分）

## 課題内容

setState に 値を渡す場合 と 関数を渡す場合 の違いを確認する課題。

### 要件

1. コンポーネント名：StateUpdateCheck
2. 以下の state を用意する
   - `const [count, setCount] = useState(0)`
3. ボタンを2つ用意する
   - 「値で +1」
   - 「関数で +1」
4. それぞれのクリック処理は以下
   - 「値で +1」: `setCount(count + 1)`
   - 「関数で +1」: `setCount(prev => prev + 1)`
5. どちらも count を表示する

### 追加ミッション

以下を 同一クリック内 で実行してみる
それぞれ 最終的に count がいくつ増えるか を確認する

```ts
setCount(count + 1)
setCount(count + 1)
```

```ts
setCount(prev => prev + 1)
setCount(prev => prev + 1)
```

### 提出物

- コンポーネントのコード
- 値更新と関数更新で結果が違う理由

### この課題の狙い

- state は 即時に更新されない
- 同一レンダー内では count は固定
- 関数更新だけが「最新の state」を保証する
- これは
  - 連続更新
  - 非同期処理
  - イベント内で複数回更新
  - に直結する超重要ポイント

---

## 提出物の問いへの解答

> 値更新と関数更新で結果が違う理由

- handleClickValue：値更新ではレンダー直後の同じ値に対して+1しているから、結果として1だけ増えることになる。
- handleCLickFn：直前の値（最新の値）を使って2回加算してる。数値型（prev）は最新の値を使って連続更新。
