# useRef：値を保持するが再レンダーしないことを体感する

- 課題 ID：FE-20251229-002
- 難易度：初級〜初中級（25〜30分）

## 課題内容

「state と ref の違い」を
実際の挙動で説明できるようになる 課題。

### 要件

1. コンポーネント仕様
   - コンポーネント名：RenderCounter
   - state: `const [count, setCount] = useState(0)`
   - ref: `const renderCountRef = useRef(0)`
2. UI
   - 「+1」ボタン： `setCount(prev => prev + 1)`
   - 「ref を +1 するだけのボタン」: `renderCountRef.current += 1`
3. 実装内容
   - A. レンダー回数をカウントする
     - コンポーネントがレンダーされるたびに `renderCountRef.current += 1`
   - B. 表示する情報
     - 画面に以下を表示
       - 現在の count
       - 現在の renderCountRef.current

### 観察ポイント（超重要）

- ref を +1 しただけのとき
  - 画面は更新される？
  - render 回数は増える？
- count を +1 したとき、ref はどう変わる？

### 提出物

- コンポーネントのコード
- なぜ ref を更新しても再レンダーされないのか
- この特性はどんな場面で使うべきか

### この課題の狙い（実務直結）

- useRef は「状態」ではない
- 再レンダーとは独立した「箱」
- 読める・壊れにくいコンポーネントになる

### 実務視点メモ

useRef は以下の状況で使うと強い

- 初回判定フラグ
- 前回値の保持
- DOM 参照
- タイマーID / observer / 外部ライブラリ

逆にこれらはダメ

- 画面に即反映したい値
- UI の表示制御

---

## 提出物の問いへの解答

> refを+1しただけのとき画面は更新される？render回数は増える？

画面更新も再レンダーも行われない。

> countを+1したときrefはどう変わる？

それまでhandleClickRefで加算していた分が一気に画面に反映される。
実際にはrefの値は変わっていたが、再レンダーがなかったため画面に出ていなかった。

> なぜ ref を更新しても再レンダーされないのか

useRefは再レンダーを引き起こさない。
ref.currentの値を変えても、Reactは画面の更新が必要であると判断しない。
そのため、refの値が変わっても再レンダーも画面更新も起きない。

> この特性はどんな場面で使うべきか

- レンダー、および再レンダーを必要としない値の保存、または一時的な値の保存
- 値の変更で無駄な再レンダーを起こしたくないとき
