# useEffect：初回レンダーだけ処理をスキップする

- 課題 ID：FE-20251228-003
- 難易度：初級〜初中級（20分）

## 課題内容

useEffect の中で
「初回レンダーかどうか」を useRef で判定する 課題。

### 要件

1. コンポーネント仕様
   - コンポーネント名：SkipFirstEffect
   - state: `const [text, setText] = useState('')`
   - ref: `const isFirstRenderRef = useRef(true)`
2. UI
   - input（テキスト入力）
   - 入力中の text を表示
3. 振る舞い要件（重要）
   - text が変更されたときに console.log を出す
     - `console.log('text changed:', text)`
   - 初回レンダーでは console.log を出さない
   - 初回かどうかの判定は
     - useRef のみで行う
     - state は使わない

### 実装ヒント（考える順）

- effect は「描画後」に走る
- 初回レンダー時にも effect は走る
- だから「初回かどうか」を自分で覚えておく必要がある
- その記憶領域が useRef

### 提出物

- コンポーネントのコード
- なぜ state ではなく ref を使うのか
- なぜ useEffect だけでは足りないのか

### この課題の狙い（かなり実務）

- 「初回だけ除外」は実務で頻出
- useEffect の癖ポイントを体で覚える
- ref = フラグ置き場、という感覚を掴む

これは

- API 初回実行回避
- Analytics 発火制御
- 入力監視

全部で使う。

---

## 提出物の問いへの解答

> なぜ state ではなく ref を使うのか

useRefは値が変わっても再レンダーを引き起こさない。
useStateで管理すると、値が変わるたびに再レンダーが走る。

> なぜ useEffect だけでは足りないのか

seEffectは初回レンダー時も必ず実行されるため、初回スキップをしたい場合は自前で判定する処理を書く必要がある。
その記憶領域としてuseRefを使う。
